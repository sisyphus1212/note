---
title: 热迁移代码逻辑
date: 2024-03-20 10:04:03
index_img: https://img-en.fs.com/community/upload/wangEditor/202003/24/_1585046553_TZOmBePO8Z.jpg
categories:
  - [linux,网络开发,虚拟化开发]
tags:
 - kernel_network
 - vdpa
---
# 热迁移(Live Migration)，又叫动态迁移、实时迁移
在线迁移有下面几种类型：
 基于共享存储的在线迁移（Live migration）: 需要实例保存在NFS共享存储中，所有的Hypervisor都可以访问共享存储，主要是实例的内存状态的迁移，速度会很快。
 块在线迁移（Block migration）：不要求实例存储在共享文件系统中，即无须共享存储。当各主机上vm使用的是本地存储， 而不是共享存储时， 要实现迁移， 需要实现镜像文件和内存状态同时迁移，还得迁移磁盘文件，速度会慢些。
 基于卷的在线迁移：实例都是基于卷的而不是临时的磁盘，无须共享存储，也支持迁移(目前仅支持基于libvirt的hypervisor)。

 ## 机迁移场景
